---
import SectionTitle from "../../components/blocks/section-title.astro";
import RootLayout from "../../components/layouts/root-layout.astro";
import { profile } from "../../data/portfolio";
---

<RootLayout
	title="Contact"
	description="Direct contact details for Shayan Fareed including email, phone, LinkedIn, and GitHub."
>
	<main data-page="contact">
		<SectionTitle
			kicker="Contact"
			title="Open for collaboration"
			description="For product engineering roles, freelance builds, and long term contracts, reach out directly through the channels below."
		/>
		<section class="p-4 sm:py-12">
			<div
				class="container mx-auto grid gap-6 lg:grid-cols-[1.3fr_0.7fr] items-start"
			>
				<article
					class="space-y-5 border-4 p-4 transition duration-300 ease-out bg-ink-900 hover:-translate-1 sm:p-6"
					data-contact-form-panel
				>
					<h3
						class="invisible opacity-0 font-display uppercase tracking-wider text-3xl sm:text-5xl"
						data-contact-heading
					>
						Let&apos;s build something that ships
					</h3>
					<p
						class="invisible opacity-0 max-w-2xl text-base text-paper-100 sm:text-lg"
						data-contact-intro
					>
						Send a quick message and I&apos;ll reply as soon as
						possible.
					</p>
					<form
						name="contact"
						method="POST"
						data-netlify="true"
						data-astro-reload
						class="space-y-4"
					>
						<div class="grid gap-4 sm:grid-cols-2">
							<label
								class="invisible opacity-0 space-y-2"
								data-contact-input-group
							>
								<span
									class="font-mono uppercase tracking-wider text-xs text-paper-300"
								>
									Name
								</span>
								<input
									type="text"
									name="name"
									required
									class="w-full border-4 border-paper-50 bg-ink-950 px-3 py-2 text-paper-50 outline-none transition duration-300 ease-out focus:border-acid-300"
								/>
							</label>
							<label
								class="invisible opacity-0 space-y-2"
								data-contact-input-group
							>
								<span
									class="font-mono uppercase tracking-wider text-xs text-paper-300"
								>
									Email
								</span>
								<input
									type="email"
									name="email"
									required
									class="w-full border-4 border-paper-50 bg-ink-950 px-3 py-2 text-paper-50 outline-none transition duration-300 ease-out focus:border-acid-300"
								/>
							</label>
							<label
								class="invisible opacity-0 space-y-2 sm:col-span-2"
								data-contact-input-group
							>
								<span
									class="font-mono uppercase tracking-wider text-xs text-paper-300"
								>
									Company / Brand
								</span>
								<input
									type="text"
									name="company"
									placeholder="Optional"
									class="w-full border-4 border-paper-50 bg-ink-950 px-3 py-2 text-paper-50 outline-none transition duration-300 ease-out placeholder:text-paper-400 focus:border-acid-300"
								/>
							</label>
							<label
								class="invisible opacity-0 space-y-2"
								data-contact-input-group
							>
								<span
									class="font-mono uppercase tracking-wider text-xs text-paper-300"
								>
									Reason
								</span>
								<select
									name="reason"
									required
									class="w-full border-4 border-paper-50 bg-ink-950 px-3 py-2 text-paper-50 outline-none transition duration-300 ease-out focus:border-acid-300"
								>
									<option value="">Select one</option>
									<option value="project-collaboration"
										>Project collaboration</option
									>
									<option value="role-opportunity"
										>Role opportunity</option
									>
									<option value="general-question"
										>General question</option
									>
									<option value="other">Other</option>
								</select>
							</label>
							<label
								class="invisible opacity-0 space-y-2"
								data-contact-input-group
							>
								<span
									class="font-mono uppercase tracking-wider text-xs text-paper-300"
								>
									Subject
								</span>
								<input
									type="text"
									name="subject"
									required
									placeholder="What should we talk about?"
									class="w-full border-4 border-paper-50 bg-ink-950 px-3 py-2 text-paper-50 outline-none transition duration-300 ease-out focus:border-acid-300"
								/>
							</label>
							<label
								class="invisible opacity-0 space-y-2 sm:col-span-2"
								data-contact-input-group
							>
								<span
									class="font-mono uppercase tracking-wider text-xs text-paper-300"
								>
									Message
								</span>
								<textarea
									name="message"
									rows="5"
									required
									placeholder="Tell me a bit about what you need."
									class="w-full border-4 border-paper-50 bg-ink-950 px-3 py-2 text-paper-50 outline-none transition duration-300 ease-out placeholder:text-paper-400 focus:border-acid-300"
								></textarea>
							</label>
						</div>
						<button
							type="submit"
							class="invisible opacity-0 border-4 border-acid-300 bg-acid-300 px-5 py-2 font-bold uppercase tracking-widest text-xs text-ink-950 transition duration-300 ease-out hover:bg-paper-50"
							data-contact-submit
						>
							Send Message
						</button>
					</form>
				</article>
				<article
					class="invisible opacity-0 space-y-5 border-4 p-4 transition duration-300 ease-out bg-ink-900 hover:-translate-1 sm:p-6"
					data-contact-direct-panel
				>
					<h3
						class="font-mono uppercase tracking-widest text-xs text-paper-300"
					>
						Direct Contact
					</h3>
					<dl>
						<dt
							class="font-mono uppercase tracking-wider text-xs text-paper-300"
						>
							Email
						</dt>
						<dd class="mb-3">
							<a
								href={`mailto:${profile.contact.email}`}
								class="invisible opacity-0 underline underline-offset-4 decoration-acid-300 text-paper-50"
								data-contact-direct-link
							>
								{profile.contact.email}
							</a>
						</dd>
						<dt
							class="font-mono uppercase tracking-wider text-xs text-paper-300"
						>
							Phone
						</dt>
						<dd class="mb-3">
							<a
								href={`tel:${profile.contact.phone}`}
								class="invisible opacity-0 underline underline-offset-4 decoration-acid-300 text-paper-50"
								data-contact-direct-link
							>
								{profile.contact.phone}
							</a>
						</dd>
						<dt
							class="font-mono uppercase tracking-wider text-xs text-paper-300"
						>
							LinkedIn
						</dt>
						<dd class="mb-3">
							<a
								href={profile.contact.linkedIn}
								target="_blank"
								class="invisible opacity-0 underline underline-offset-4 decoration-acid-300 text-paper-50"
								data-contact-direct-link
							>
								{
									profile.contact.linkedIn.replace(
										"https://",
										"",
									)
								}
							</a>
						</dd>
						<dt
							class="font-mono uppercase tracking-wider text-xs text-paper-300"
						>
							GitHub
						</dt>
						<dd class="mb-3">
							<a
								href={profile.contact.github}
								target="_blank"
								class="invisible opacity-0 underline underline-offset-4 decoration-acid-300 text-paper-50"
								data-contact-direct-link
							>
								{profile.contact.github.replace("https://", "")}
							</a>
						</dd>
					</dl>
				</article>
			</div>
		</section>
	</main>
</RootLayout>

<script>
	import { gsap } from "gsap";
	import { ScrollTrigger } from "gsap/ScrollTrigger";

	gsap.registerPlugin(ScrollTrigger);

	const resetContactTriggers = () => {
		ScrollTrigger.getAll().forEach((trigger) => {
			const id = trigger.vars.id;

			if (typeof id === "string" && id.startsWith("sfx-contact-")) {
				trigger.kill();
			}
		});
	};

	const runContactAnimations = () => {
		const root = document.querySelector('[data-page="contact"]');

		if (!root) {
			return;
		}

		resetContactTriggers();
		const formPanel = root.querySelector("[data-contact-form-panel]");

		gsap.fromTo(
			root.querySelectorAll(
				"[data-contact-heading], [data-contact-intro]",
			),
			{ autoAlpha: 0, y: 16 },
			{
				autoAlpha: 1,
				y: 0,
				duration: 0.3,
				stagger: 0.05,
				ease: "power1.out",
				scrollTrigger: {
					id: "sfx-contact-header",
					trigger: formPanel || root,
					start: "top 88%",
					once: true,
				},
			},
		);

		gsap.fromTo(
			root.querySelectorAll(
				"[data-contact-input-group], [data-contact-submit]",
			),
			{ autoAlpha: 0, y: 8 },
			{
				autoAlpha: 1,
				y: 0,
				duration: 0.2,
				stagger: 0.05,
				ease: "power1.out",
				scrollTrigger: {
					id: "sfx-contact-fields",
					trigger: formPanel || root,
					start: "top 85%",
					once: true,
				},
			},
		);

		gsap.fromTo(
			root.querySelector("[data-contact-direct-panel]"),
			{ autoAlpha: 0, x: 16 },
			{
				autoAlpha: 1,
				x: 0,
				duration: 0.3,
				ease: "power1.out",
				scrollTrigger: {
					id: "sfx-contact-panel",
					trigger: "[data-contact-direct-panel]",
					start: "top 85%",
					once: true,
				},
			},
		);

		gsap.fromTo(
			root.querySelectorAll("[data-contact-direct-link]"),
			{ autoAlpha: 0, x: -8 },
			{
				autoAlpha: 1,
				x: 0,
				duration: 0.2,
				stagger: 0.05,
				ease: "power1.out",
				scrollTrigger: {
					id: "sfx-contact-links",
					trigger: "[data-contact-direct-panel]",
					start: "top 80%",
					once: true,
				},
			},
		);

		ScrollTrigger.refresh();
	};

	if (document.documentElement.dataset.sfxContactListenerBound !== "1") {
		document.addEventListener("astro:page-load", runContactAnimations);
		document.addEventListener("astro:before-swap", resetContactTriggers);
		document.documentElement.dataset.sfxContactListenerBound = "1";
	}
</script>
