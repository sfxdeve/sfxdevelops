---
import { cn } from "../../lib/utils";
import { normalizePath } from "../../lib/path";
import "../../styles/global.css";

interface Props {
    title?: string;
    description?: string;
}

const { title, description } = Astro.props;

const navItems = [
    { label: "Home", href: "/" },
    { label: "Work", href: "/work" },
    { label: "Resume", href: "/resume" },
    { label: "Contact", href: "/contact" },
];
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <title>
            {
                `${title ? title : "Shayan Fareed"} | Full Stack JavaScript Developer`
            }
        </title>
        <meta
            name="description"
            content={description
                ? description
                : "Portfolio of Shayan Fareed, Full Stack JavaScript Developer building scalable web applications."}
        />
        <meta name="generator" content={Astro.generator} />
    </head>
    <body class="min-h-dvh font-body text-paper-50 bg-ink-950 bg-grid">
        <header class="border-b-4 border-paper-50 bg-ink-950">
            <div
                class="container mx-auto p-4 flex flex-wrap gap-3 items-center justify-between"
            >
                <a
                    href="/"
                    class="font-display uppercase tracking-wider text-3xl"
                >
                    SFX//Develops
                </a>
                <nav>
                    <ul class="flex flex-wrap gap-2 items-center">
                        {
                            navItems.map((item) => {
                                const currPath = normalizePath(
                                    Astro.url.pathname,
                                );
                                const itemPath = normalizePath(item.href);
                                const itemIsActive =
                                    itemPath === "/"
                                        ? currPath === "/"
                                        : currPath.startsWith(itemPath);

                                return (
                                    <li>
                                        <a
                                            href={item.href}
                                            class={cn(
                                                "border-2 border-paper-50 py-2 px-3 font-mono uppercase tracking-wider text-xs  transition duration-300 ease-out hover:text-ink-950 hover:bg-paper-50",
                                                !itemIsActive && "",
                                                itemIsActive &&
                                                    "border-acid-300 text-ink-950 bg-acid-300",
                                            )}
                                        >
                                            {item.label}
                                        </a>
                                    </li>
                                );
                            })
                        }
                    </ul>
                </nav>
            </div>
        </header>
        <slot />
        <footer class="border-t-4 border-paper-50 bg-ink-950">
            <div
                class="container mx-auto p-4 flex flex-wrap gap-3 items-center justify-between"
            >
                <p
                    class="font-mono uppercase tracking-wider text-xs text-paper-200"
                >
                    2026 SFX//Develops
                </p>
                <p
                    class="font-mono uppercase tracking-wider text-xs text-acid-100"
                >
                    Built with Astro + Tailwind
                </p>
            </div>
        </footer>
    </body>
</html>
